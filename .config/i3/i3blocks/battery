#!/bin/bash

info=$(acpi -b | sed -e "s/Battery 0: //" -e "s/,//g")
status=$(echo $info | awk '{print $1}')
percent=$(echo $info | awk '{print $2}' | sed -e "s/%//")
lefttime=$(echo $info | awk '{print $3}' | rev | cut -c 4- | rev)

text=''

if [ $status = "Discharging" ]; then
    if [ $percent -lt 25 ]; then
        text=" "
    elif [ $percent -lt 50 ]; then
        text=" "
    elif [ $percent -lt 75 ]; then
        text=" "
    else
        text=" "
    fi

    if [ $BLOCK_BUTTON -gt 0 ]; then
        echo "${text} ${lefttime}"
        echo "${text} ${lefttime}"
    else
        echo "${text} ${percent}"
        echo "${text} ${percent}"
    fi

    if [ $percent -lt 15 ]; then
        echo "#FF0000"
    elif [ $percent -lt 35 ]; then
        echo "#FFAE00"
    elif [ $percent -lt 55 ]; then
        echo "#FFF600"
    elif [ $percent -lt 75 ]; then
        echo "#A8FF00"
    else
        echo "#00FF00"
    fi

else
    text="  ${percent}"

    if [ $BLOCK_BUTTON -gt 0 ]; then
        echo $lefttime
        echo $lefttime
    else
        echo $text
        echo $text
    fi
    
    if [ $percent -gt 89 ]; then
        echo "#00FF00"
    fi

fi
